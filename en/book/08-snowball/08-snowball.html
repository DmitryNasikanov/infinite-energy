<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>snowball â€“ ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../images/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-ade000faa502ff19940f8f0164ee5c92.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WW2S48BBEP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-WW2S48BBEP');
</script>
<style>
.content { max-width: 900px; }
p { text-indent: 1.5em; margin-top: 0.3em; margin-bottom: 0.3em; text-align: justify; }
h1 + p, h2 + p, h3 + p, h4 + p { text-indent: 0; }
p:has(img), .quarto-figure, .figure { text-indent: 0; }
p:has(> strong:first-child) { text-indent: 0; }
p:has(> em:first-child) { text-indent: 0; }
/* ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ outline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ */
.btn-outline {
  display: inline-block;
  padding: 0.8rem 2rem;
  border: 2px solid #555;
  border-radius: 8px;
  color: #555;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
  background: transparent;
  text-align: center;
}
.btn-outline:hover {
  background: #555;
  color: #fff;
  text-decoration: none;
}
.btn-outline-primary {
  border-color: #0d6efd;
  color: #0d6efd;
}
.btn-outline-primary:hover {
  background: #0d6efd;
  color: #fff;
}
/* ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑĞ·Ñ‹Ğº Ğ² dropdown */
.dropdown-item.active {
  font-weight: bold;
  background-color: rgba(0,0,0,0.05);
  color: inherit !important;
}
</style>
<script>
// Language switcher - handles GitHub Pages subdirectory
const LANG_FLAGS = { ru: 'ğŸ‡·ğŸ‡º', en: 'ğŸ‡¬ğŸ‡§' };  // For matching dropdown items
const LANG_LABELS = { ru: 'RU', en: 'EN' };   // For navbar indicator

// Translation map for navigation labels (RU â†’ EN)
const TRANSLATIONS = {
  // Navbar
  'ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ': 'Project Helios',
  'ĞšĞ½Ğ¸Ğ³Ğ°': 'Book',
  'ĞĞ°ÑƒĞºĞ°': 'Science',
  'ĞĞ± Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğµ': 'About',
  // Sidebar sections
  'ĞĞ±Ğ·Ğ¾Ñ€': 'Overview',
  'Ğ¡Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸': 'Summary Articles',
  'Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹': 'Detailed Topics',
  'Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸': 'Reference',
  // Executive summary
  'ĞŸÑ€Ğ¾ĞµĞºÑ‚ Â«Ğ“ĞµĞ»Ğ¸Ğ¾ÑÂ» Ğ·Ğ° 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚': 'Project Helios in 5 Minutes',
  // Summary articles
  'ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ĞœĞµÑ€ĞºÑƒÑ€Ğ¸Ğ¹?': 'Why Mercury?',
  'Ğ›ÑƒĞ½Ğ°': 'Moon',
  'Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°': 'Project Budget',
  'Ğ”Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°': 'Roadmap',
  'ĞœĞ°Ñ€Ñ (Ğ¿ĞµÑ€ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ğ°)': 'Mars (Perspective)',
  // Main detailed topics
  'Ğ—ĞµÑ€ĞºĞ°Ğ»Ğ° Ğ Ğ¾Ñ': 'Swarm Mirrors',
  'Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ Ğ¾Ñ‚Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ': 'Reflection Geometry',
  'Ğ¥Ğ°Ğ± Ğ¿Ñ€Ğ¸Ñ‘Ğ¼Ğ° ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸': 'Energy Reception Hub',
  'Ğ­Ğ½ĞµÑ€Ğ³Ğ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ĞœĞµÑ€ĞºÑƒÑ€Ğ¸Ñ': 'Mercury Power System',
  'Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°': 'Delivery',
  'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾': 'Production',
  // Production section
  'ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ': 'Navigation',
  'ĞŸĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€ĞµĞ³Ğ¾Ğ»Ğ¸Ñ‚Ğ°': 'Regolith Processing',
  'Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ»Ğ¸Ğ· MRE': 'MRE Electrolysis',
  'Ğ”Ğ¸ÑÑ‚Ğ¸Ğ»Ğ»ÑÑ†Ğ¸Ñ ÑˆĞ»Ğ°ĞºĞ°': 'Slag Distillation',
  'Ğ¡Ñ‚ĞµĞºĞ»Ğ¾Ğ²Ğ¾Ğ»Ğ¾ĞºĞ½Ğ¾': 'Glass Fiber',
  'Ğ›Ğ¸Ğ½Ğ¸Ñ Ñ‚Ğ¸Ñ‚Ğ°Ğ½Ğ°': 'Titanium Line',
  'Ğ£Ğ³Ğ»ĞµÑ€Ğ¾Ğ´ (Ğ¾Ğ¿Ñ†.)': 'Carbon (opt.)',
  'ĞšÑ€ĞµĞ¼Ğ½Ğ¸Ğ¹': 'Silicon',
  'ĞšĞµÑ€Ğ°Ğ¼Ğ¸ĞºĞ° MgO': 'MgO Ceramics',
  // Factory production
  'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ²Ğ¾Ğ´Ğ¾Ğ²': 'Factory Production',
  'ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ²Ğ¾Ğ´ (Bootstrap)': 'First Factory (Bootstrap)',
  'ĞŸĞ»Ğ°Ğ²ĞºĞ°': 'Melting',
  'Ğ›Ğ¸Ñ‚ÑŒĞµ (ĞœĞĞ›Ğ—)': 'Casting (CCM)',
  'ĞŸÑ€Ğ¾ĞºĞ°Ñ‚': 'Rolling',
  '3D-Ğ¿ĞµÑ‡Ğ°Ñ‚ÑŒ (WAAM)': '3D Printing (WAAM)',
  'Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°': 'Assembly',
  'ĞšÑƒĞ¿Ğ¾Ğ»Ğ°': 'Domes',
  'ĞĞ±Ğ¾Ñ€ÑƒĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ': 'Equipment',
  'Ğ¡Ğ°Ğ¼Ğ¾Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ': 'Self-Replication',
  // Mass drivers
  'ĞœĞ°ÑÑ-Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ñ‹': 'Mass Drivers',
  'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ ĞœĞ”': 'MD Production',
  'Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ Ğ¸ ĞšĞŸĞ”': 'Theory & Efficiency',
  'ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ': 'Scaling',
  'Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ ĞœĞ”': 'MD Components',
  'Ğ ĞµĞ»ÑŒÑÑ‹': 'Rails',
  'ĞšĞ°Ñ‚ÑƒÑˆĞºĞ¸': 'Coils',
  'ĞšĞ°Ñ€ĞºĞ°Ñ': 'Frame',
  'Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ĞœĞ”': 'MD Assembly',
  'Ğ¢Ñ€ĞµĞº': 'Track',
  'Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ¸ĞºĞ°': 'Electronics',
  'Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ': 'Testing',
  // Robots
  'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¾Ğ²': 'Robot Production',
  'Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹': 'Components',
  'Ğ Ğ°Ğ¼Ñ‹': 'Frames',
  'Ğ‘Ğ°Ñ‚Ğ°Ñ€ĞµĞ¸ (NaS)': 'Batteries (NaS)',
  'ĞĞºÑ‚ÑƒĞ°Ñ‚Ğ¾Ñ€Ñ‹': 'Actuators',
  'Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¾Ğ²': 'Robot Assembly',
  'ĞšÑ€Ğ°Ğ±-Ğœ': 'Crab-M',
  'ĞšĞµĞ½Ñ‚Ğ°Ğ²Ñ€-Ğœ': 'Centaur-M',
  'ĞšÑ€Ğ¾Ñ‚-Ğœ': 'Mole-M',
  // Reference
  'Ğ“Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ²': 'Glossary',
  'Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸': 'Technologies & Sources',
  'Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹': 'Physical Constants',
  'ĞĞ¾Ğ¼ĞµĞ½ĞºĞ»Ğ°Ñ‚ÑƒÑ€Ğ°': 'Nomenclature',
  'Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°': 'Risks & Limitations'
};

function getBasePath() {
  const match = window.location.pathname.match(/^(.*?)\/(ru|en)\//);
  return match ? match[1] : '';
}

function getCurrentLang() {
  const basePath = getBasePath();
  const path = window.location.pathname;
  const escaped = basePath.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  const pattern = new RegExp(`^${escaped}/(ru|en)/`);
  const match = path.match(pattern);
  return match ? match[1] : 'ru';
}

function switchLanguage(targetLang) {
  const basePath = getBasePath();
  const path = window.location.pathname;
  const currentLang = getCurrentLang();
  if (currentLang === targetLang) return;

  sessionStorage.setItem('scrollY', window.scrollY);

  const escaped = basePath.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  const langPattern = new RegExp(`^(${escaped})/(ru|en)/`);
  let newPath = path.replace(langPattern, `$1/${targetLang}/`);

  // Root page handling
  if (path === basePath + '/' || path === basePath + '/index.html' || path === basePath) {
    newPath = `${basePath}/${targetLang}/`;
  }

  // Fallback Ğ´Ğ»Ñ ĞºĞ½Ğ¸Ğ³Ğ¸ (Ğ³Ğ»Ğ°Ğ²Ñ‹ Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ²ĞµĞ´ĞµĞ½Ñ‹ Ğ½Ğ° EN)
  if (newPath.includes('/book/') && !newPath.endsWith('/book/') && !newPath.endsWith('/book/index.html')) {
    newPath = `${basePath}/${targetLang}/book/`;
  }

  window.location.href = newPath;
}

window.addEventListener('load', function() {
  const savedY = sessionStorage.getItem('scrollY');
  if (savedY) { window.scrollTo(0, parseInt(savedY)); sessionStorage.removeItem('scrollY'); }
});

document.addEventListener('DOMContentLoaded', function() {
  // Handle dropdown items for language switching
  document.querySelectorAll('.dropdown-item').forEach(el => {
    const text = el.textContent;
    for (const [langCode, flag] of Object.entries(LANG_FLAGS)) {
      if (text.includes(flag)) {
        el.addEventListener('click', function(e) { e.preventDefault(); switchLanguage(langCode); });
        if (langCode === getCurrentLang()) el.classList.add('active');
        break;
      }
    }
  });

  // Update navbar language indicator from ğŸŒ to current language label
  const currentLang = getCurrentLang();
  const currentLabel = LANG_LABELS[currentLang] || 'ğŸŒ';
  document.querySelectorAll('.navbar-nav .dropdown-toggle, .navbar-nav .nav-link').forEach(link => {
    if (link.textContent.trim() === 'ğŸŒ') {
      link.textContent = currentLabel;
    }
  });

  // Translate navigation labels for EN pages
  if (currentLang === 'en') {
    // Translate navbar items
    document.querySelectorAll('.navbar-nav .nav-link').forEach(el => {
      const text = el.textContent.trim();
      if (TRANSLATIONS[text]) {
        el.textContent = TRANSLATIONS[text];
      }
    });
    // Translate sidebar menu text
    document.querySelectorAll('.menu-text').forEach(el => {
      const text = el.textContent.trim();
      if (TRANSLATIONS[text]) {
        el.textContent = TRANSLATIONS[text];
      }
    });
    // Translate sidebar title
    document.querySelectorAll('.sidebar-title').forEach(el => {
      const text = el.textContent.trim();
      if (TRANSLATIONS[text]) {
        el.textContent = TRANSLATIONS[text];
      }
    });
  }

  // Rewrite ALL links (navbar + sidebar + content) to match current language
  document.querySelectorAll('a[href*="/ru/"]').forEach(link => {
    const href = link.getAttribute('href');
    if (href) {
      link.setAttribute('href', href.replace('/ru/', `/${currentLang}/`));
    }
  });

  // Fix sidebar active state for EN pages (after link rewriting)
  if (currentLang === 'en') {
    const currentPath = window.location.pathname;
    const sidebarLinks = document.querySelectorAll(
      '#quarto-sidebar .sidebar-item-text.sidebar-link[href]'
    );
    let activeLink = null;
    for (const link of sidebarLinks) {
      if (new URL(link.href).pathname === currentPath) {
        activeLink = link;
        break;
      }
    }
    if (activeLink) {
      activeLink.classList.add('active');
      let section = activeLink.closest('ul.sidebar-section');
      while (section) {
        section.classList.add('show');
        const item = section.closest('li.sidebar-item-section');
        if (item) {
          item.querySelectorAll(
            ':scope > .sidebar-item-container > [data-bs-toggle="collapse"]'
          ).forEach(t => {
            t.classList.remove('collapsed');
            t.setAttribute('aria-expanded', 'true');
          });
        }
        section = item ? item.parentElement.closest('ul.sidebar-section') : null;
      }
    }
  }

  // Add hreflang alternate links for SEO
  const basePath = getBasePath();
  const path = window.location.pathname;
  const otherLang = currentLang === 'ru' ? 'en' : 'ru';
  const escaped = basePath.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  const langPattern = new RegExp(`^(${escaped})/(ru|en)/`);
  const altPath = path.replace(langPattern, `$1/${otherLang}/`);
  const siteUrl = 'https://DmitryNasikanov.github.io/infinite-energy';

  const linkRu = document.createElement('link');
  linkRu.rel = 'alternate';
  linkRu.hreflang = 'ru';
  linkRu.href = siteUrl + (currentLang === 'ru' ? path : altPath);
  document.head.appendChild(linkRu);

  const linkEn = document.createElement('link');
  linkEn.rel = 'alternate';
  linkEn.hreflang = 'en';
  linkEn.href = siteUrl + (currentLang === 'en' ? path : altPath);
  document.head.appendChild(linkEn);

});
</script>


<link rel="stylesheet" href="../../../ru/science/data/widgets.css">
<meta property="og:title" content="ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ">
<meta property="og:description" content="Engineering roadmap for a Dyson Swarm built from Mercury â€” 1.1 billion mirrors, 21 petawatts to Earth. Hard sci-fi novel + complete engineering appendix.">
<meta property="og:image" content="https://DmitryNasikanov.github.io/infinite-energy/en/book/08-snowball/images/og-preview.png">
<meta property="og:site_name" content="ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ">
<meta name="twitter:title" content="ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ">
<meta name="twitter:description" content="Engineering roadmap for a Dyson Swarm built from Mercury â€” 1.1 billion mirrors, 21 petawatts to Earth. Hard sci-fi novel + complete engineering appendix.">
<meta name="twitter:image" content="https://DmitryNasikanov.github.io/infinite-energy/en/book/08-snowball/images/og-preview.png">
<meta name="twitter:creator" content="@DmitryNas">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../ru/index.html"> 
<span class="menu-text">ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ“ĞµĞ»Ğ¸Ğ¾Ñ</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../ru/book/index.html"> 
<span class="menu-text">ĞšĞ½Ğ¸Ğ³Ğ°</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../ru/science/index.html"> 
<span class="menu-text">ĞĞ°ÑƒĞºĞ°</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../ru/about.html"> 
<span class="menu-text">ĞĞ± Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğµ</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DmitryNasikanov/infinite-energy"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">ğŸŒ</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../../ru/index.html">
 <span class="dropdown-text">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../en/index.html">
 <span class="dropdown-text">ğŸ‡¬ğŸ‡§ English</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-snowball" id="toc-the-snowball" class="nav-link active" data-scroll-target="#the-snowball">The Snowball</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="the-snowball" class="level1">
<h1>The Snowball</h1>
<p><strong>Shenzhen. Longhua Industrial Zone. February 2027.</strong></p>
<p>Li Wei led them down the corridor between production lines, and the air around hummed from thousands of machines working simultaneouslyâ€”a stocky man around forty-five, with a crew cut and the calm gaze of someone who solved problems rather than created them. Viktor walked alongside, Valery lagged slightly behind, examining the assembly lines through glass, and Pavel wrote something in a notebookâ€”numbers, names, questions.</p>
<p>â€œAmerican sanctions,â€ Li Wei began, and in his voice was neither pride nor defiance, only statement of fact. â€œWe circumvented them. Lithography equipmentâ€”three years ago we depended on Taiwan, now our own production. Softwareâ€”our own development. Rare earth elementsâ€”domestic supply.â€ He stopped at a window behind which robot manipulators worked, assembling microchips with precision unavailable to human hands. â€œThree years ago we couldnâ€™t do this. Nowâ€”no worse than Silicon Valley. Maybe even better: our engineers are hungrier.â€</p>
<p>Valery approached closer to the glass, and on his face was that delighted smile with which he looked at any manifestation of technological breakthrough. â€œChina provedâ€”technological breakthrough is possible! Three years! Imagine what weâ€™ll do in ten. They tried to strangle you with sanctionsâ€”you circumvented them. This is proof the project can survive even if half the world is against it.â€</p>
<p>Pavel didnâ€™t look up from his notebook. â€œThree years agoâ€”Taiwan. Nowâ€”Shenzhen.â€ He raised his head and looked at Li Wei. â€œDependence remains. Only supplier changed. If tomorrow Shenzhen closes suppliesâ€”what happens to project?â€</p>
<p>Li Wei shook his head. â€œWe wonâ€™t close supplies. The project is needed by us no less than by you.â€</p>
<p>â€œFor now,â€ Pavel clarified. â€œFor now itâ€™s needed. And then?â€</p>
<p>Viktor remained silent, listening to the argument, and thought that both were rightâ€”and both didnâ€™t understand the main thing. Valery saw technological breakthrough, proof that humanity can overcome barriers. Pavel saw change of dependencies, redistribution of risks. But neither of them saw what Viktor saw: the project rests not on technologies and not on money. It rests on a fragile balance of interests that could collapse at any moment.</p>
<p>â€œOwn equipment is good,â€ Viktor said finally, looking at Li Wei. â€œBut quality? Comparable to ASML? Or are there compromises?â€</p>
<p>Li Wei didnâ€™t lie. â€œThere are compromises. For now. But weâ€™re working. Every monthâ€”better. Every quarterâ€”closer to world level.â€ He paused. â€œYou know Americans fear us?â€</p>
<p>â€œI know,â€ Viktor answered.</p>
<p>â€œThey think we want to defeat them.â€ Li Wei shook his head. â€œWe donâ€™t want to defeat. We want to build. Victory is a zero-sum game. Buildingâ€”isnâ€™t.â€</p>
<p>Valery nodded as if this confirmed everything he believed. Pavel smiled, but without malice. â€œBeautiful words. But when the moment comes to chooseâ€”build together or win aloneâ€”what will China choose?â€</p>
<p>Li Wei didnâ€™t answer. Viktor understood: because he doesnâ€™t know. No one knows.</p>
<p>The three of them stood by the windowâ€”idealist, cynic, and engineer in the middleâ€”and watched robots assembling microchips for a project that should change the world. Viktor remembered Senator Morrow almost a year ago: â€œNaive idealists.â€ â€œGeopolitical threat.â€ And remembered the strange conversation with Kuzmichev that evening when philosophical questions sounded like a testâ€”or like an invitation. Viktor hadnâ€™t understood then what exactly he was being offered to hear between the lines. But since then he looked at Egor Mikhailovich differentlyâ€”as you look at someone whose words have a second meaning.</p>
<p>Li Wei looked at the three of them and seemed to understand: the project rests not on agreement but on the fact that each sees something different in it.</p>
<p><strong>Bangalore. Electronics City Tech Park. March 2027.</strong></p>
<p>Vaishali Rao entered the conference room lastâ€”with a laptop under her arm, a cup of tea in her hand, and a haggard face that spoke louder than any words about three sleepless nights. â€œSorry Iâ€™m late,â€ she said, settling opposite the three. â€œWe were retraining the group behavior model.â€ Her gaze slid across faces: Viktor, with whom sheâ€™d worked the last three months, an elderly man in glasses, and a broad-shouldered man who looked at her as if already calculating her salary and code failure rate in his head.</p>
<p>She was twenty-eight years old and headed a team of seventy programmers working on artificial intelligence for the projectâ€™s robots. When Viktor first flew to Bangalore three months ago, Vaishali met him skeptically: â€œWe have contracts with Google, Amazon, Microsoft. Why do we need your project?â€ Viktor showed her specifications. An hour later she said: â€œWhen do we start?â€</p>
<p>Now, three months later, she was showing resultsâ€”graphs on screen, simulation logs, video from test site. Neural networks worked. Robots learned to coordinate without central control, like an ant colony where each knows their job without waiting for orders from above.</p>
<p>Valery leaned forward. â€œSwarm intelligence,â€ he repeated. â€œLike an anthill. Seventy peopleâ€”and machines learn to work together. Without central control.â€</p>
<p>Vaishali smiled but didnâ€™t answer. Pavel leaned back and looked at the organizational structure chart hanging on the wall. â€œSeventy programmers,â€ he pronounced, voice even, without intonation. â€œWhatâ€™s turnover? Google, Amazon pay you more. What stops them from leaving tomorrow?â€</p>
<p>Vaishali wasnâ€™t offendedâ€”the question was fair. â€œNothing stops them. Half my team can leave any moment. But while theyâ€™re interestedâ€”theyâ€™re here.â€</p>
<p>â€œChallenge ends when money ends,â€ Pavel noted. â€œOr when Google offers a more interesting challenge.â€</p>
<p>â€œWhat about integration with Chinese hardware?â€ Viktor interrupted, and in his voice sounded that note meaning one thing: the conversation had gone in the wrong direction. â€œSwarm intelligence is one thing. Real robots with real drivesâ€”another. What percentage of code will need rewriting?â€</p>
<p>Vaishali thought. â€œAbout twenty percent. Four months for refinement, plus three for integration. Weâ€™ll make deadline.â€</p>
<p>â€œWhat if you donâ€™t?â€ Pavel picked up. â€œMissing the deadline by a monthâ€”a contract breach with China. A contract breachâ€”the entire project stops.â€</p>
<p>â€œI canâ€™t guarantee there wonâ€™t be unforeseen circumstances,â€ Vaishali answered calmly. â€œBut I can guarantee my team will do everything so there arenâ€™t any.â€</p>
<p>She smiled. â€œLots of work. But interesting.â€ Closed laptop. â€œSee you at integration.â€</p>
<p><strong>Kazan. BRICS Summit. April 2027.</strong></p>
<p>The Kazan Kremlin hall was overcrowded. Flags of ten states stood along the walls, and to the familiar colors of Brazil, Russia, India, China, and South Africa were added new ones: the green of Saudi Arabia, the black-red-green of Egypt, the blue-white-orange of the United Arab Emirates.</p>
<p>Viktor sat in the second row, next to Pavel. In frontâ€”government delegations, ministers, advisors. Behindâ€”journalists and observers from around the world.</p>
<p>A year ago Egor Mikhailovich said â€œa week, maximum two.â€ The summit had been in preparation for fourteen months. Endless intermediate negotiations, video conferences at three in the morning, classified papers that were read but not signed. Most countries waitedâ€”wanted to see that the project was real, that the robots worked, that the money wasnâ€™t going into the sand. Only when the Russian factory showed its first modules and Bangaloreâ€”working swarm intelligence, they decided. To joinâ€”and do it publicly.</p>
<p>The chairmanâ€”the Russian foreign ministerâ€”announced voting. The question was formulated dryly: â€œOn joining the international energy infrastructure project.â€ But everyone understood what this was about.</p>
<p>Brazil voted first. â€œFor.â€ Then South Africaâ€”also â€œfor.â€ Egypt. Ethiopia. Saudi Arabiaâ€”after a pause that seemed to last forever.</p>
<p>â€œFor,â€ the Saudi energy minister announced. â€œWith reservations weâ€™ll discuss separately.â€</p>
<p>The hall buzzed. Viktor felt Pavel squeeze his elbow.</p>
<p>â€œDo you understand whatâ€™s happening?â€ Pavel whispered.</p>
<p>â€œI understand,â€ Viktor answered.</p>
<p>Saudi Arabiaâ€”a country built on oilâ€”had just voted for a project that would make oil unnecessary. This meant one thing: theyâ€™d calculated and understood. Understood itâ€™s better to be inside than outside. Better to participate in changes than resist them.</p>
<p>After the voting Pavel went out into the corridor. There Egor Mikhailovich waitedâ€”with a cigarette in hand, though smoking here was forbidden.</p>
<p>Kuzmichev winked.</p>
<p>â€œLook, it worked,â€ he said, nodding toward the hall. â€œSnowball.â€</p>
<p>Pavel smiled. He remembered that meeting in Kondrashovâ€™s office when Kuzmichev first said: the more countries join, the harder to stay outside. Saudi Arabiaâ€”a country built on oilâ€”had just voted for a project that would make oil unnecessary. The snowball worked.</p>
<p>â€œEurope is silent,â€ Pavel noted.</p>
<p>â€œEurope is thinking,â€ Kuzmichev took a drag. â€œTheyâ€™re waiting for States to say itâ€™s okay. And States wonâ€™t say.â€</p>
<p>â€œWonâ€™t say yet.â€</p>
<p>â€œFor nowâ€”yes. But time works for us.â€ He stubbed out his cigarette on the edge of the urn. â€œI donâ€™t like politics. But sometimes it works.â€</p>
<p><strong>Pyongyang. Factory No.&nbsp;17. August 2027.</strong></p>
<p>The shop had no windowsâ€”only concrete walls, bare lamps under the ceiling, and rows of machine tools behind which people in identical blue coveralls worked. On the wall hung the leaderâ€™s portrait; under itâ€”a red banner with an inscription in Korean, but the meaning could be guessed without translation: â€œLaborâ€”Glory.â€</p>
<p>Comrade Pak led them through the shop in broken Russian, showing assembly linesâ€”short, lean, with the bearing of a military engineer accustomed to speaking facts, not promises. Viktor walked in the middle between his father and Pavel, and each of them looked at the same thingâ€”but saw different.</p>
<p>Valery stopped at a machine tool where a worker was assembling a manipulator body. Precise movements, no rush, discipline instead of bustle. â€œImagine,â€ he said quietly, as if addressing not his son but himself, â€œhere they assemble robots that will fly to Mercury. In this shop, in Pyongyang, people believe in a project half the world hasnâ€™t heard of yet.â€</p>
<p>Pavel looked at his watch, at the sign above the conveyor, at the stack of finished bodies in the corner. â€œForty units per month,â€ he pronounced, more counting aloud than asking. â€œTwo million eachâ€”eighty million monthly revenue. Not bad. And whatâ€™s the defect rate, Comrade Pak?â€</p>
<p>Pak didnâ€™t blink. â€œTwo percent. The restâ€”suitable.â€</p>
<p>â€œTwo percent with manual assembly,â€ Pavel repeated, and in his voice was neither admiration nor skepticism, only the habitual weighing of numbers. â€œThatâ€™s better than I expected. But the scaleâ€”a hundred units by fall. Can you maintain quality?â€</p>
<p>â€œWe can,â€ Pak answered. â€œWe have people.â€</p>
<p>Viktor stopped at the testing line where assembled manipulators underwent verification. Manual labor instead of automationâ€”this always caused internal resistance in him. He saw precision, yes, but also saw fatigue in the workersâ€™ faces. â€œWhat happens when a person gets tired?â€ he asked, looking Pak in the eyes. â€œA robot doesnâ€™t tire. A person tires. This is a risk.â€</p>
<p>Pak noddedâ€”the question was reasonable. â€œWe work twelve-hour shifts. Two shifts. Control at every stage.â€ He paused. â€œWe donâ€™t have robots for assembling robots. But we have discipline.â€</p>
<p>Valery turned to his son, and in his eyes was that quiet conviction from which Viktor couldnâ€™t defend himself. â€œThe main thingâ€”theyâ€™re doing it, Vitya. A dream becomes reality. Here, in this shop without windows, someone assembles by hand what will fly to a star. This is more important than process perfection.â€</p>
<p>Pavel smiled, but without malice. â€œA dream wonâ€™t fly on defects, Valery Petrovich. But if two percent is the truth, I donâ€™t mind the dream.â€</p>
<p>Viktor stood between themâ€”between his fatherâ€™s faith and Pavelâ€™s calculationâ€”and understood both were right. And both wrong. The DPRK chose â€œcheap and fast,â€ but â€œcheapâ€ here meant not shoddy work but a different path: labor instead of automation, discipline instead of technology. Not worse. Just different.</p>
<p><strong>Moscow. Vector office. December 2027.</strong></p>
<p>The snowball rolledâ€”and with it grew an avalanche of numbers. New partners meant new contracts, new budgets, new reporting. Pavel spent November and early December on the documents of the expanded consortium: consolidated tables, checked forecasts, distributed costs by categories. Routine he lovedâ€”in it was the honesty of numbers that donâ€™t know how to lie. Thatâ€™s precisely why, when the numbers began lying, he noticedâ€”and stayed in the office alone.</p>
<p>Third night without sleep. On the deskâ€”tea, two monitors, printouts. Account entries went cleanly, as if by a rulerâ€”salaries, purchases, services, business tripsâ€”and he looked not at the numbers but at the rhythm. The rhythm was even. Too even. The anomaly was found on the third pass: 47,000,000 rubles for â€œinternational certification consulting services.â€ Payerâ€”a district directorate, recipientâ€”Apex Advisory, Dubai. A company registered two months ago, websiteâ€”one landing page, a purchased template, text with clichÃ©s. The money through an Emirates bank went furtherâ€”to Singapore. Pavel stretched. â€œBeautiful,â€ he pronounced aloud. And thought: what if this is legal? What if I destroy the project because of my paranoia? He took out his phone, scrolled contactsâ€”â€œSergei A., Sber (internal audit)â€â€”didnâ€™t like looking at surnames long, made him uneasy. Called.</p>
<p>â€œSleeping?â€ When they picked up on the other end. â€œNot anymore. What do you need?â€ â€œNeed a look at one entry. Through Emirates and Singapore. Iâ€™ll send traces. Unofficially.â€ On the other end they sighed. â€œTheyâ€™ll fire you, Pasha.â€ â€œFirst let them hire me.â€ He hung up.</p>
<p>Twenty minutes later a message came: â€œNexus Energy Partners. Venture fund. Government contracts. Industry connections.â€ The money structure was the kind made by smart people who have too much time and too little conscience.</p>
<p>An hour later Sergei called back. â€œGolden Gate Holdings. Singapore. Insideâ€”Nexus Energy Partners, American fund. Your moneyâ€”not clean.â€ And hung up.</p>
<p>Igor Semenovich from internal audit listened silently, then nodded: â€œIâ€™ll file a control marker. Seven days. If you find itâ€”we go upstairs together. If notâ€”a flash drive with the recording and a resignation letter.â€ â€œUnderstood.â€ â€œThen go.â€</p>
<p>â€œSomeoneâ€™s receiving money,â€ he pronounced to the silence. â€œNot for â€˜certification.â€™ For access. For an â€˜internal optionâ€™ on the future. And this someone is ours.â€ He didnâ€™t write the nameâ€”wrote â€œoursâ€ and circled it. Somewhere inside something compressedâ€”not fear but something worse: recognition. Heâ€™d seen such schemes in othersâ€™ reports, in cases ending with resignations and sentences, but neverâ€”from inside, neverâ€”about his own. His hands trembled harder. He placed them on the desk and watched his fingers vibrate finely. His body knew before his brain: this is dangerous. This can cost a career. Or a life.</p>
<p>He thought: what if he stopped now? Deleted the markers, forgot he saw these numbers? Returned to normal work, to normal life? But he knew he couldnâ€™t. Because if heâ€™s rightâ€”someoneâ€™s selling the project. And Viktor doesnâ€™t know about it. Pavel sat in the chair and closed his eyes; fatigue fell immediatelyâ€”he allowed himself to feel it only now.</p>
<p>In a week Pavel stopped four suspicious contractsâ€”somewhere a call to lawyers sufficed, somewhere he had to write service memos. The marker ticked. Money went along established routes, no one checked along the way. This wasnâ€™t improvisationâ€”this was a system.</p>
<p>At lunch he met Viktor by the elevatorâ€”he looked like a person whoâ€™d long learned not to sleep and not complain: sand in his eyes, a folder with colored bookmarks in hand. â€œHow are you?â€ â€œFine. Youâ€”how?â€</p>
<p>â€œWorking. Found something. A financial anomaly.â€ Pavel lowered his voice. â€œMoney going outâ€”I see that. But if someoneâ€™s selling informationâ€”they should be paid. And I donâ€™t see that yet. Two flows. I only see one.â€ Viktor paused for a second. â€œMaybe the second is better hidden.â€ â€œMaybe,â€ Pavel nodded. â€œAnd be careful. With whatâ€™s most polite.â€ â€œWith what?â€ â€œWith trust.â€ Viktor nodded as people nod when they donâ€™t fully understand but are ready to understand later.</p>
<p>By weekâ€™s end heâ€™d assembled a folder. Not with names. With rhythm. Short notes, tables, printed contractor cards, Dubai and Singapore registry extracts, a printout of the â€œApex Advisoryâ€ website with a checkmark over the typo â€œcertfication.â€ On topâ€”a service memo in two paragraphs as Igor Semenovich had requested: â€œControl marker justification.â€</p>
<p>He put the folder in the drawer, locked itâ€”not because he feared but because thatâ€™s correct. The city beyond the window was still black, but the black was already shallowâ€”as if someone had turned on a light far, far away and you saw that darkness isnâ€™t material, itâ€™s absence. He went home, and the office door closed quietly, as happens only with doors that have a conscience.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/DmitryNasikanov\.github\.io\/infinite-energy");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>