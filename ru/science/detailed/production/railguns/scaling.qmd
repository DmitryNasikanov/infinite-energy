---
title: "Масштабирование масс-драйверов"
sidebar: science
execute:
  echo: false
---

```{ojs}
//| output: false

// Загрузка данных из JSON
dataScript = FileAttachment("../../../data/db/data.json").json()

// Материалы доступные на Меркурии

mercuryMaterials = new Set(
  dataScript.planetMaterials
    .filter(pm => pm.planet_id === "mercury")
    .map(pm => pm.material_id)
)

// Словари для быстрого поиска
materialsById = new Map(dataScript.materials.map(m => [m.id, m]))
unitsById = new Map(dataScript.units.map(u => [u.id, u]))
planetsById = new Map(dataScript.planets.map(p => [p.id, p]))

// Функция для получения материалов компонента
function getComponentMaterials(componentId) {
  return dataScript.unitMaterials
    .filter(um => um.unit_id === componentId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      return {
        symbol: material?.symbol,
        name: material?.name || um.material_id,
        fraction_pct: um.fraction_pct,
        isLocal: mercuryMaterials.has(um.material_id)
      };
    });
}

// Функция для отображения виджета единицы
function unitWidget(unitId) {
  const unit = unitsById.get(unitId);
  if (!unit) return html`<div class="db-widget">Единица ${unitId} не найдена</div>`;

  const planet = planetsById.get(unit.production_planet_id);

  // Материалы базового юнита
  const materials = dataScript.unitMaterials
    .filter(um => um.unit_id === unitId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      const isLocal = mercuryMaterials.has(um.material_id);
      const massKg = unit.mass_kg ? (unit.mass_kg * um.fraction_pct / 100).toFixed(0) : null;
      return { ...um, material, isLocal, massKg };
    });

  // Компоненты (подсборки)
  const components = dataScript.unitComponents
    .filter(uc => uc.assembly_id === unitId)
    .map(uc => {
      const component = unitsById.get(uc.component_id);
      const totalMassKg = component?.mass_kg ? (component.mass_kg * uc.quantity) : null;
      const isLocal = component?.production_planet_id === unit.production_planet_id;
      const componentMaterials = getComponentMaterials(uc.component_id);

      return {
        id: uc.component_id,
        name: component?.name || uc.component_id,
        quantity: uc.quantity,
        massKg: totalMassKg,
        isLocal,
        materials: componentMaterials
      };
    });

  // Итого считаем ТОЛЬКО по материалам (не компонентам!)
  const localPct = materials.filter(m => m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const importPct = materials.filter(m => !m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const hasCriticalImports = components.some(c => !c.isLocal);

  // Строки таблицы компонентов
  const componentRows = components.map(c => html`
    <tr class="component-row">
      <td>
        <strong>${c.name}</strong>${c.quantity > 1 ? html` ×${c.quantity}` : ''}
        <div class="component-materials">
          ${c.materials.map(m => html`<span class="${m.isLocal ? 'local' : 'import'}">${m.symbol || m.name} ${m.fraction_pct}%</span>`)}
        </div>
      </td>
      <td>${c.massKg ? c.massKg.toFixed(0) : '—'} кг</td>
      <td class="${c.isLocal ? 'local' : 'import'}">${c.isLocal ? '✓' : '⚠ импорт'}</td>
    </tr>
  `);

  // Строки таблицы материалов
  const materialRows = materials.map(m => html`
    <tr>
      <td>
        ${m.material?.symbol ? html`<strong>${m.material.symbol}</strong> ` : ''}
        ${m.material?.name || m.material_id}
      </td>
      <td>${m.fraction_pct}%</td>
      <td>${m.massKg || '—'} кг</td>
      <td class="${m.isLocal ? 'local' : 'import'}">${m.isLocal ? '✓ местный' : '⚠ импорт'}</td>
    </tr>
  `);

  return html`
    <div class="db-widget">
      <h4>${unit.name} <span style="color: #6c757d; font-weight: normal;">(${unit.id})</span></h4>
      <div class="meta">
        ${unit.mass_kg ? html`<strong>${unit.mass_kg.toLocaleString()}</strong> кг` : ''}
        ${unit.power_kw ? html` | <strong>${unit.power_kw.toLocaleString()}</strong> кВт` : ''}
        ${planet ? html` | Производство: ${planet.name}` : ''}
      </div>

      ${components.length > 0 ? html`
        <div class="section-header">Компоненты</div>
        <table class="components-table">
          <thead><tr><th>Компонент</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${componentRows}</tbody>
        </table>
      ` : ''}

      ${materials.length > 0 ? html`
        <div class="section-header">Материалы</div>
        <table class="materials-table">
          <thead><tr><th>Материал</th><th>%</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${materialRows}</tbody>
        </table>
        <div class="summary">
          Итого: <span class="local-pct">${localPct.toFixed(0)}% местное</span> |
          <span class="import-pct">${importPct.toFixed(0)}% импорт</span>
          ${hasCriticalImports ? html`<br/><strong>⚠ Содержит импортные компоненты</strong>` : ''}
        </div>
      ` : ''}

      <div class="link">
        <a href="data/nomenclature.html?unit=${unitId}">Подробнее →</a>
      </div>
    </div>
  `;
}
```

> **TL;DR**
>
> - **Производительность:** 600 запусков/сутки = 60 тонн зеркал (+ 9 т контейнеры)
> - **Масштабирование:** 1 миллиард зеркал за 7-8 лет (экспоненциальный рост)
> - **Энергия:** 55 МВт комплекс (33 МВт запуски + 22 МВт производство)
> - **Роботы:** 52 робота на 1 МД (добыча 10, производство 21, логистика 10, обслуживание 7)
> - **Панели:** 35 000 м² солнечных панелей (самоокупаемость после 3 зеркал)

> **Теория:** Физика масс-драйверов см. [Теория МД](theory.qmd) | **Производство:** Детали см. [Производство МД](overview.qmd)

---

## Производительность масс-драйвера

### Базовая производительность

| Параметр | Значение |
|----------|----------|
| Запусков в сутки | **600** |
| Интервал между запусками | 2.4 минуты |
| Масса контейнера | 115 кг |
| Масса зеркала | 100 кг |
| Суточный выход зеркал | **60 тонн** |

**Расчёт интервала:**

```
24 часа = 1440 минут
1440 / 600 = 2.4 минуты между выстрелами
```

**Годовая производительность:**

```
600 запусков/день × 365 дней = 219 000 запусков/год
219 000 × 100 кг = 21 900 тонн зеркал/год ≈ 22 000 т
```

### Ограничения производительности

| Фактор | Влияние |
|--------|---------|
| Охлаждение катушек | 2-3 мин между выстрелами |
| Подготовка контейнера | Загрузка + раскрутка платформы |
| Зарядка конденсаторов | 1-2 минуты на полную зарядку |
| Обслуживание | Плановая остановка 1 день/месяц |

**Реальная производительность:** ~550-600 запусков/сутки при оптимальной работе.

---

## Масштабирование зеркал

### Экспоненциальный рост

**Принцип:** Первые зеркала генерируют энергию → строим новые заводы → больше зеркал → ещё больше энергии.

| Год | Масс-драйверов | Зеркал/год | Накопленных зеркал | Мощность (ГВт) |
|-----|----------------|------------|-------------------|----------------|
| 1 | 1 | 220 тыс | 220 тыс | 0.22 |
| 2 | 10 | 2.2 млн | 2.4 млн | 2.4 |
| 3 | 100 | 22 млн | 24 млн | 24 |
| 4 | 500 | 110 млн | 134 млн | 134 |
| 5 | 1 000 | 220 млн | 354 млн | 354 |
| 6 | 2 000 | 440 млн | 794 млн | 794 |
| **7** | **3 500** | **770 млн** | **1.56 млрд** | **1 560** |

**Ключевой момент:** 1 миллиард зеркал достигается за **7-8 лет** при удвоении производства каждые 12-18 месяцев.

### Темпы роста

**Фазы роста:**

1. **Год 1-2: Начальная фаза** (1-10 МД)
   - Ручная настройка процессов
   - Отладка роботов
   - Производительность: 50-70% от теоретической

2. **Год 3-5: Экспоненциальный рост** (100-1000 МД)
   - Автоматизация полная
   - Саморепликация заводов
   - Производительность: 80-90%

3. **Год 6-10: Массовое производство** (1000-10000 МД)
   - Параллельные заводы
   - Оптимизация логистики
   - Производительность: 90-95%

### Сценарии масштабирования

#### Консервативный (удвоение каждые 2 года)

```
Год 1: 1 МД
Год 3: 4 МД
Год 5: 16 МД
Год 7: 64 МД
Год 9: 256 МД

1 миллиард зеркал: ~12-15 лет
```

#### Агрессивный (удвоение каждые 1.5 года)

```
Год 1: 1 МД
Год 2.5: 4 МД
Год 4: 16 МД
Год 5.5: 64 МД
Год 7: 256 МД
Год 8.5: 1024 МД

1 миллиард зеркал: ~7-8 лет
```

#### Оптимистичный (удвоение каждый год)

```
Год 1: 1 МД
Год 2: 4 МД
Год 3: 16 МД
Год 4: 64 МД
Год 5: 256 МД
Год 6: 1024 МД

1 миллиард зеркал: ~5-6 лет
```

**Выбран:** Агрессивный сценарий (удвоение каждые 1.5 года) как реалистичный при саморепликации.

---

## Энергопотребление

### Энергия на запуски

| Параметр | Значение |
|----------|----------|
| Энергия на запуск | 4.7 ГДж |
| Запусков в сутки | 600 |
| Энергия в сутки | 2.82 ТДж |
| **Средняя мощность** | **33 МВт** |

**Пиковая мощность:** 390 МВт (12 секунд разгона)

### Энергия на производство зеркал

| Этап | Мощность | Примечание |
|------|----------|------------|
| Плавка алюминия | 12 МВт | 70 т/день, 15 кВтч/кг |
| Прокатка фольги | 3 МВт | Прокатный стан |
| Формовка и сборка | 5 МВт | Роботы + оборудование |
| Литьё грузиков (Fe) | 1 МВт | Мини-печь |
| Производство контейнеров | 1 МВт | Штамповка Al |
| **ИТОГО производство** | **22 МВт** | Непрерывно |

### Полное энергопотребление комплекса

```
Запуски (масс-драйвер): 33 МВт
Производство зеркал: 22 МВт

ИТОГО: 55 МВт непрерывно
```

---

## Энергобаланс комплекса

### Солнечные панели на Меркурии

**До первого зеркала** комплекс работает от солнечных панелей на поверхности:

| Параметр | Значение |
|----------|----------|
| Инсоляция (Solar Boost) | 9-14 кВт/м² |
| КПД панелей GaAs | 30% |
| Выработка | 2.7-4.2 кВт/м² |
| Потребление | 55 МВт |
| **Требуемая площадь** | **13 000-20 000 м²** |

**С запасом 30%:** ~**25 000-35 000 м²** панелей.

### Переход на зеркала Роя

**Первое зеркало 100×100 м:**

| Параметр | Значение |
|----------|----------|
| Площадь зеркала | 10 000 м² |
| Инсоляция (орбита Меркурия) | 10 343 Вт/м² |
| Отражённая мощность (КПД 90%) | **93 МВт** |
| На приёмнике (потери ~15%) | ~80 МВт |
| Электричество (GaAs 30%) | **~24 МВт** |

**Энергобаланс первого зеркала:**

```
Потребление комплекса: 55 МВт
Выработка от 1 зеркала: ~24 МВт

Дефицит: -31 МВт
```

**Первое зеркало не покрывает потребности!** Требуется ~3 зеркала для самоокупаемости:

```
3 зеркала × 24 МВт = 72 МВт
Избыток: +17 МВт
```

**С высокоэффективными концентраторами (КПД 45%):**

```
Выработка: 3 × 36 МВт = 108 МВт
Избыток: +53 МВт
```

**Вывод:** После запуска **3 зеркал** комплекс выходит на самообеспечение. Избыток направляется на:
- Строительство новых заводов
- Расширение производства роботов
- Запас на пиковые нагрузки

### Долгосрочный баланс

| Фаза | Зеркал | Мощность зеркал | Масс-драйверов | Потребление |
|------|--------|-----------------|----------------|-------------|
| Старт | 0 | 0 МВт | 1 | 55 МВт |
| Самоокупаемость | 3 | 72 МВт | 1 | 55 МВт |
| Год 1 | 220 000 | 5 ТВт | 1-10 | 0.5 ГВт |
| Год 3 | 24 млн | 560 ТВт | 100 | 5.5 ГВт |
| Год 7 | 1.5 млрд | 35 ПВт | 3500 | 192 ГВт |

> **Примечание:** Мощность зеркал = отражённая мощность (~93 МВт/зеркало × 0.25 для зеркал направленных на Меркурий). На Землю передаётся ~18% через LSP станции.

**Вывод:** Энергия Роя на **порядки превосходит** потребление производства.

---

## Роботы: полная цепочка снабжения

### Цепочка для 1 масс-драйвера

```
Добыча руды → Переработка → Производство зеркал → Логистика → Буфер → Запуск
```

Масс-драйвер потребляет **600 зеркал/день = 70 тонн/день**

---

### 1. Добыча сырья

| Задача | Роботов | Расчёт |
|--------|---------|--------|
| Добыча руды (Кроты) | 6 | 70 т × 3 (руда→металл) = 210 т руды/день ÷ 50 т/робот |
| Транспорт руды к заводу | 4 | 210 т ÷ 70 т/рейс, 2 рейса/день |
| **Итого добыча** | **10** | |

**Подробнее:** [Крот-М робот-экскаватор](../robots/assembly/moles.qmd)

---

### 2. Переработка и производство зеркал

| Задача | Роботов | Примечание |
|--------|---------|------------|
| Плавка алюминия | 2 | Печь автоматическая |
| Прокатка фольги 4 мкм | 3 | Точная работа |
| Раскрой и формовка | 4 | 600 шт/день = 25/час |
| Литьё грузиков | 2 | Железо или базальт |
| Волочение тросов | 2 | Стальная проволока |
| Монтаж электроники | 2 | Точная работа |
| Складывание + упаковка | 4 | Z-fold, контейнер |
| Контроль качества | 2 | Отбраковка |
| **Итого производство** | **21** | |

**Подробнее:** [Кентавр-М робот-манипулятор](../robots/assembly/centaurs.qmd)

---

### 3. Логистика и буфер

| Задача | Роботов | Примечание |
|--------|---------|------------|
| Транспорт зеркал к буферу | 4 | От завода к масс-драйверу |
| Управление складом (буфер) | 2 | Запас на 2-3 дня = 1500 зеркал |
| Подача на пусковую позицию | 4 | Непрерывно, каждые 2.4 мин |
| **Итого логистика** | **10** | |

**Подробнее:** [Краб-М робот-логист](../robots/assembly/crabs.qmd)

---

### 4. Обслуживание масс-драйвера

| Задача | Роботов | Тип |
|--------|---------|-----|
| Установка на платформу + раскрутка | 2 | Кентавр-М |
| Техобслуживание | 2 | Кентавр-М |
| Диагностика | 1 | Крот-М с сенсорами |
| Резерв/ремонт | 2 | Кентавр-М |
| **Итого обслуживание** | **7** | |

---

### Сводка: роботы на 1 масс-драйвер

| Этап | Роботов | % |
|------|---------|---|
| Добыча сырья | 10 | 19% |
| Производство зеркал | 21 | 40% |
| Логистика и буфер | 10 | 19% |
| Обслуживание масс-драйвера | 7 | 14% |
| Резерв (зарядка, поломки) | 4 | 8% |
| **ИТОГО** | **52** | 100% |

**Пересчёт с учётом зарядки:** Увеличение на +4 робота связано с временем зарядки NaS-батарей:
- +1 Крот (кабельный резерв)
- +2 Кентавра (вахты снаружи)
- +1 Краб (время зарядки на маршрутах)

**Подробнее:** [Производство роботов](../robots/overview.qmd)

---

### Масштабирование роботов

| Масс-драйверов | Роботов (×52) | Примечание |
|--------------|---------------|------------|
| 1 | 52 | Начальная фаза |
| 10 | 520 | Год 1-2 |
| 100 | 5 200 | Год 2-3 |
| 1 000 | 52 000 | Год 3-5 |
| 10 000 | 520 000 | Год 5-8 |
| 100 000 | **5.2 млн** | Полная мощность |

**Примечание:** Часть роботов (добыча, переработка) может обслуживать несколько масс-драйверов, если завод крупный. Реальная потребность: **45-50 роботов на масс-драйвер** при централизованном производстве.

### Типы роботов

| Тип | Назначение | Масса | Доля |
|-----|-----------|-------|------|
| [Крот-М](../robots/assembly/moles.qmd) | Добыча реголита | 1500 кг | 15% |
| [Краб-М](../robots/assembly/crabs.qmd) | Логистика, транспорт | 1000 кг | 40% |
| [Кентавр-М](../robots/assembly/centaurs.qmd) | Манипуляция, сборка | 370 кг | 45% |

---

## Расход материалов на зеркала

### Один диск-зеркало

| Компонент | Материал | Масса |
|-----------|----------|-------|
| Отражающая плёнка | Алюминий 4 мкм | 100 кг |
| Грузики (4 шт) | Железо или базальт | 3 кг |
| Тросы (4 шт) | Сталь | 2 кг |
| Электроника управления | Импорт | 50 г |
| Актуаторы (электрохромика) | Местное | 1 кг |
| Контейнер для запуска | Алюминий | 10 кг |
| **ИТОГО** | | **~115 кг** |

### Суточный расход на 1 масс-драйвер

```
600 запусков × 115 кг = 70 тонн

Из них:
- Алюминий: ~66 тонн (местный)
- Железо/сталь: ~3 тонны (местный)
- Электроника: ~30 кг (импорт)
```

### Годовой расход на 1 масс-драйвер

```
Зеркала: 70 т/день × 365 = 25 550 тонн/год

Из них:
- Алюминий: ~24 000 т/год (94%)
- Железо: ~1 100 т/год (4.3%)
- Электроника: ~11 кг/год (0.04%)
```

**Источник материалов:** [Переработка реголита](../materials/overview.qmd)

---

## См. также

- [Теория МД](theory.qmd) — физика, КПД, криоалюминий, проблемы
- [Производство МД](overview.qmd) — обзор производства масс-драйверов
- [Производство роботов](../robots/overview.qmd) — Крот-М, Краб-М, Кентавр-М
- [Переработка реголита](../materials/overview.qmd) — получение Al, Fe, Si
- [Энергетика](../../energy.qmd) — система энергоснабжения Меркурия
- [Зеркала Роя](../../mirrors.qmd) — детали конструкции зеркал

---

## Источники

- [NASA Mass Driver Concept](https://ntrs.nasa.gov/citations/19770010564)
- [Производительность робототехники](../robots/overview.qmd)
- [Экспоненциальный рост производства](https://en.wikipedia.org/wiki/Self-replicating_machine)
