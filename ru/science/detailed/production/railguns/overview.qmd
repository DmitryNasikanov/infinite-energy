---
title: "Производство масс-драйверов"
sidebar: science
execute:
  echo: false
---

```{ojs}
//| output: false

// Загрузка данных из JSON
dataScript = FileAttachment("../../data/db/data.json").json()

// Материалы доступные на Меркурии (две версии для совместимости)
mercuryProduction = new Set(
  dataScript.materialProduction
    .filter(mp => mp.planet_id === "mercury")
    .map(mp => mp.material_id)
)

mercuryMaterials = new Set(
  dataScript.planetMaterials
    .filter(pm => pm.planet_id === "mercury")
    .map(pm => pm.material_id)
)

// Словари для быстрого поиска
materialsById = new Map(dataScript.materials.map(m => [m.id, m]))
unitsById = new Map(dataScript.units.map(u => [u.id, u]))
planetsById = new Map(dataScript.planets.map(p => [p.id, p]))

// Функция для получения материалов компонента
function getComponentMaterials(componentId) {
  return dataScript.unitMaterials
    .filter(um => um.unit_id === componentId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      return {
        symbol: material?.symbol,
        name: material?.name || um.material_id,
        fraction_pct: um.fraction_pct,
        isLocal: mercuryProduction.has(um.material_id)
      };
    });
}

// Функция для отображения виджета единицы
function unitWidget(unitId) {
  const unit = unitsById.get(unitId);
  if (!unit) return html`<div class="db-widget">Единица ${unitId} не найдена</div>`;

  const planet = planetsById.get(unit.production_planet_id);

  // Материалы базового юнита
  const materials = dataScript.unitMaterials
    .filter(um => um.unit_id === unitId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      const isLocal = mercuryProduction.has(um.material_id);
      const massKg = unit.mass_kg ? (unit.mass_kg * um.fraction_pct / 100).toFixed(0) : null;
      return { ...um, material, isLocal, massKg };
    });

  // Компоненты (подсборки)
  const components = dataScript.unitComponents
    .filter(uc => uc.assembly_id === unitId)
    .map(uc => {
      const component = unitsById.get(uc.component_id);
      const totalMassKg = component?.mass_kg ? (component.mass_kg * uc.quantity) : null;
      const isLocal = component?.production_planet_id === unit.production_planet_id;
      const componentMaterials = getComponentMaterials(uc.component_id);

      return {
        id: uc.component_id,
        name: component?.name || uc.component_id,
        quantity: uc.quantity,
        massKg: totalMassKg,
        isLocal,
        materials: componentMaterials
      };
    });

  // Итого считаем ТОЛЬКО по материалам (не компонентам!)
  const localPct = materials.filter(m => m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const importPct = materials.filter(m => !m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const hasCriticalImports = components.some(c => !c.isLocal);

  // Строки таблицы компонентов
  const componentRows = components.map(c => html`
    <tr class="component-row">
      <td>
        <strong>${c.name}</strong>${c.quantity > 1 ? html` ×${c.quantity}` : ''}
        <div class="component-materials">
          ${c.materials.map(m => html`<span class="${m.isLocal ? 'local' : 'import'}">${m.symbol || m.name} ${m.fraction_pct}%</span>`)}
        </div>
      </td>
      <td>${c.massKg ? c.massKg.toFixed(0) : '—'} кг</td>
      <td class="${c.isLocal ? 'local' : 'import'}">${c.isLocal ? '✓' : '⚠ импорт'}</td>
    </tr>
  `);

  // Строки таблицы материалов
  const materialRows = materials.map(m => html`
    <tr>
      <td>
        ${m.material?.symbol ? html`<strong>${m.material.symbol}</strong> ` : ''}
        ${m.material?.name || m.material_id}
      </td>
      <td>${m.fraction_pct}%</td>
      <td>${m.massKg || '—'} кг</td>
      <td class="${m.isLocal ? 'local' : 'import'}">${m.isLocal ? '✓ местный' : '⚠ импорт'}</td>
    </tr>
  `);

  return html`
    <div class="db-widget">
      <h4>${unit.name} <span style="color: #6c757d; font-weight: normal;">(${unit.id})</span></h4>
      <div class="meta">
        ${unit.mass_kg ? html`<strong>${unit.mass_kg.toLocaleString()}</strong> кг` : ''}
        ${unit.power_kw ? html` | <strong>${unit.power_kw.toLocaleString()}</strong> кВт` : ''}
        ${planet ? html` | Производство: ${planet.name}` : ''}
      </div>

      ${components.length > 0 ? html`
        <div class="section-header">Компоненты</div>
        <table class="components-table">
          <thead><tr><th>Компонент</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${componentRows}</tbody>
        </table>
      ` : ''}

      ${materials.length > 0 ? html`
        <div class="section-header">Материалы</div>
        <table class="materials-table">
          <thead><tr><th>Материал</th><th>%</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${materialRows}</tbody>
        </table>
        <div class="summary">
          Итого: <span class="local-pct">${localPct.toFixed(0)}% местное</span> |
          <span class="import-pct">${importPct.toFixed(0)}% импорт</span>
          ${hasCriticalImports ? html`<br/><strong>⚠ Содержит импортные компоненты</strong>` : ''}
        </div>
      ` : ''}

      <div class="link">
        <a href="data/nomenclature.html?unit=${unitId}">Подробнее →</a>
      </div>
    </div>
  `;
}
```

> **TL;DR**
>
> - **Назначение:** Электромагнитные катапульты для запуска зеркал на орбиту
> - **Параметры:** Длина 2-3 км, скорость 5 км/с, ускорение 43g
> - **Масса:** ~1300 тонн (99.5% местные материалы)
> - **Производительность:** 600 запусков/сутки, 70 тонн зеркал/сутки
> - **Этапы:** Элементы (рельсы, катушки, каркас) → Сборка (трек, электроника, тестирование)

---

## Обзор

Масс-драйвер — это электромагнитная пушка, которая разгоняет зеркала до второй космической скорости Меркурия (4.3 км/с) для вывода на орбиту и формирования Роя.

> **Теория и масштабирование:**
>
> - [Теория масс-драйверов](theory.qmd) — физика запуска, КПД, криоалюминий, известные проблемы, лунный МД
> - [Масштабирование](scaling.qmd) — производительность, рост производства, энергобаланс, роботы

---

## Базовые параметры

### Физика запуска

| Параметр | Значение | Источник |
|----------|----------|----------|
| Вторая космическая Меркурия | 4.3 км/с | [NASA Mercury Fact Sheet](https://nssdc.gsfc.nasa.gov/planetary/factsheet/mercuryfact.html) |
| Целевая скорость (с запасом) | **5 км/с** | +16% на потери |
| Гравитация Меркурия | 3.7 м/с² | 0.38g |
| Длина разгонного тоннеля | 2-3 км | |
| Ускорение | ~420 м/с² (43g) | |
| Время разгона | ~12 сек | |

---

## Конструкция масс-драйвера

### Основные компоненты

```{ojs}
unitWidget("EQU-001")
```

| Компонент | Масса | Материал | Локализация |
|-----------|-------|----------|-------------|
| Каркас тоннеля (3 км) | ~800 т | Сталь Fe-6%Mn | 100% местное |
| Рельсы + обмотки + охлаждение | ~500 т | Алюминий (крио) | 100% местное |
| Электроника и сенсоры | ~7 т | Импорт | **Земля** |
| **ИТОГО** | **~1300 т** | | **99.5% местное** |

---

## Три этапа производства МД

Производство масс-драйвера делится на три последовательных этапа:

### 1. Производство элементов (Материалы → Компоненты)

Готовые материалы (Al/Fe/Si) превращаются в компоненты масс-драйвера.

**Три линии производства элементов:**

- [Производство рельсов](elements/rails.qmd) — алюминиевые направляющие для разгона
- [Намотка катушек](elements/coils.qmd) — электромагнитные обмотки (криоалюминий)
- [Каркас тоннеля](elements/frame.qmd) — стальной каркас 3 км

**Материалы:** Al (500 т) + Fe (800 т) из [переработки реголита](../materials/overview.qmd)

---

### 2. Сборка трека (Компоненты → Масс-драйвер)

Компоненты собираются в готовый масс-драйвер длиной 3 км.

**Три линии финальной сборки:**

- [Сборка трека](assembly/track.qmd) — укладка рельсов и монтаж катушек
- [Электроника управления](assembly/electronics.qmd) — системы управления и сенсоры
- [Тестирование](assembly/testing.qmd) — проверка работоспособности

**Время сборки:** ~3-4 месяца на первый МД, ~1-2 месяца на последующие (опыт)

---

### 3. Эксплуатация

После запуска МД работает в режиме **600 запусков/сутки**.

| Параметр | Значение |
|----------|----------|
| Цикл запуска | 2-3 минуты |
| Запусков в час | 20-30 |
| Запусков в сутки | **600** |
| Запусков в год | **219 000** |

**Пропускная способность:** 600 × 116 кг = **70 тонн зеркал/сутки** = **26 000 т/год**

---

## Энергия запуска

### На один запуск

```
Кинетическая энергия = ½mv²

Для зеркала 116 кг:
E = 0.5 × 116 × (5000)² = 1.45 ГДж

С КПД 40% (алюминиевые обмотки):
E_потребление = 1.45 / 0.40 = 3.6 ГДж
```

### Мощность МД

| Параметр | Значение |
|----------|----------|
| Пиковая мощность (разгон) | 400 МВт |
| Средняя мощность (600 запусков/сутки) | **33 МВт** |
| Тепловыделение | ~40 МВт (требует охлаждения) |

**Подробнее:** [Энергосистема Меркурия](../../energy.qmd)

---

## Криоалюминий: решение проблемы меди

**Проблема:** На Меркурии нет меди — основного материала обмоток МД на Земле.

**Решение:** Криогенное охлаждение алюминиевых обмоток.

| Материал | При +20°C | При -180°C |
|----------|-----------|------------|
| Медь | 100% | 400% |
| Алюминий | 60% | **360%** |

**Вывод:** Алюминий при -180°C имеет проводимость почти как медь при комнатной температуре.

**Расположение МД:** У терминатора (граница день/ночь), радиаторы направлены в тень (-180°C).

**Подробнее:** [Намотка катушек](elements/coils.qmd)

---

## Материальный баланс

**На 1 масс-драйвер (~1300 т):**

| Материал | Масса | Источник |
|----------|-------|----------|
| Сталь Fe-6%Mn | ~800 т | [Переработка реголита](../materials/overview.qmd) |
| Алюминий (криогенный) | ~500 т | [Переработка реголита](../materials/overview.qmd) |
| Электроника | ~7 т | **Импорт с Земли** |

**Локализация:** 99.5% по массе

**Время производства материалов:**
- Al: 500 т ÷ 42 т/день = **12 дней**
- Fe: 800 т ÷ 18 т/день = **45 дней**

**ИТОГО:** ~**45-60 дней** на накопление материалов + 30 дней на сборку = **~3 месяца**

---

## Производительность системы

### Один МД

| Параметр | Значение |
|----------|----------|
| Зеркал/день | 600 |
| Зеркал/год | 219 000 |
| Тонн зеркал/день | 70 т |

### 1000 МД (зрелая система)

| Параметр | Значение |
|----------|----------|
| Зеркал/день | 600 000 |
| Зеркал/год | 219 млн |
| Тонн зеркал/день | 70 000 т |

**Время до 1 млрд зеркал:** ~7-8 лет при 1000 МД

---

## Энергопотребление комплекса

| Потребитель | Мощность |
|-------------|----------|
| Масс-драйвер (средняя) | 33 МВт |
| Солнечные печи (плавка) | 10 МВт |
| Производство зеркал (прокатка, сварка) | 5 МВт |
| Роботы (52 шт × 5 кВт) | 0.26 МВт |
| Системы управления | 2 МВт |
| **ИТОГО** | **~50 МВт** |

**Энергоснабжение:** Кремниевые панели 35 000 м² (56 МВт) + Рой зеркал

**Подробнее:** [Энергосистема Меркурия](../../energy.qmd)

---

## Строительство МД

### Этапы

| Этап | Время | Роботов |
|------|-------|---------|
| Подготовка площадки | 2 недели | 20 |
| Рытьё тоннеля (3 км) | 3 месяца | 50 Кротов-М |
| Укладка каркаса | 1 месяц | 30 Кентавров-М |
| Монтаж рельсов | 2 недели | 20 Кентавров-М |
| Намотка катушек | 1 месяц | 10 Кентавров-М |
| Электрика и электроника | 2 недели | 15 Кентавров-М |
| Тестирование | 1 неделя | 5 Кентавров-М |
| **ИТОГО** | **~6 месяцев** | пик 50 |

**С опытом:** При параллельном строительстве и отработанных процедурах — **3-4 месяца**.

---

## Износ и обслуживание

### Изнашиваемые части

| Компонент | Срок службы | Замена (1 МД/год) |
|-----------|-------------|-------------------|
| Направляющие рельсы | 3-6 месяцев | 300-400 т Al |
| Обмотки катушек | 3-5 лет | 30 т Al |
| Конденсаторы | 2-3 года | 20 т |
| Электроника | 5-10 лет | 0.5 т (импорт) |

**Годовой расход на замену:** ~350 т Al + 0.5 т импорта

---

## Масштабирование

### Развёртывание МД по фазам

| Фаза | Год | МД | Производство зеркал/год |
|------|-----|----|------------------------|
| Начальный | 1-2 | 100 | 22 млн |
| Рост | 3-5 | 1000 | 219 млн |
| Зрелый | 5-10 | 10 000 | 2.2 млрд |

**Время до 1 млрд зеркал:** ~7-8 лет при 1000 МД

---

## См. также

- [Производство рельсов](elements/rails.qmd) — алюминиевые направляющие
- [Намотка катушек](elements/coils.qmd) — криоалюминиевые обмотки
- [Каркас тоннеля](elements/frame.qmd) — стальная конструкция 3 км
- [Сборка трека](assembly/track.qmd) — монтаж МД
- [Энергосистема](../../energy.qmd) — питание МД
- [Зеркала Роя](../../mirrors.qmd) — что запускает МД
