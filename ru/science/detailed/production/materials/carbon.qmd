---
title: "Добыча углерода (опционально)"
sidebar: science
execute:
  echo: false
---

```{ojs}
//| output: false

// Загрузка данных из JSON
dataScript = FileAttachment("../../../data/db/data.json").json()

// Материалы доступные на Меркурии (две версии для совместимости)
mercuryProduction = new Set(
  dataScript.materialProduction
    .filter(mp => mp.planet_id === "mercury")
    .map(mp => mp.material_id)
)

mercuryMaterials = new Set(
  dataScript.planetMaterials
    .filter(pm => pm.planet_id === "mercury")
    .map(pm => pm.material_id)
)

// Словари для быстрого поиска
materialsById = new Map(dataScript.materials.map(m => [m.id, m]))
unitsById = new Map(dataScript.units.map(u => [u.id, u]))
planetsById = new Map(dataScript.planets.map(p => [p.id, p]))

// Функция для получения материалов компонента
function getComponentMaterials(componentId) {
  return dataScript.unitMaterials
    .filter(um => um.unit_id === componentId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      return {
        symbol: material?.symbol,
        name: material?.name || um.material_id,
        fraction_pct: um.fraction_pct,
        isLocal: mercuryProduction.has(um.material_id)
      };
    });
}

// Функция для отображения виджета единицы
function unitWidget(unitId) {
  const unit = unitsById.get(unitId);
  if (!unit) return html`<div class="db-widget">Единица ${unitId} не найдена</div>`;

  const planet = planetsById.get(unit.production_planet_id);

  // Материалы базового юнита
  const materials = dataScript.unitMaterials
    .filter(um => um.unit_id === unitId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      const isLocal = mercuryProduction.has(um.material_id);
      const massKg = unit.mass_kg ? (unit.mass_kg * um.fraction_pct / 100).toFixed(0) : null;
      return { ...um, material, isLocal, massKg };
    });

  // Компоненты (подсборки)
  const components = dataScript.unitComponents
    .filter(uc => uc.assembly_id === unitId)
    .map(uc => {
      const component = unitsById.get(uc.component_id);
      const totalMassKg = component?.mass_kg ? (component.mass_kg * uc.quantity) : null;
      const isLocal = component?.production_planet_id === unit.production_planet_id;
      const componentMaterials = getComponentMaterials(uc.component_id);

      return {
        id: uc.component_id,
        name: component?.name || uc.component_id,
        quantity: uc.quantity,
        massKg: totalMassKg,
        isLocal,
        materials: componentMaterials
      };
    });

  // Итого считаем ТОЛЬКО по материалам (не компонентам!)
  const localPct = materials.filter(m => m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const importPct = materials.filter(m => !m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const hasCriticalImports = components.some(c => !c.isLocal);

  // Строки таблицы компонентов
  const componentRows = components.map(c => html`
    <tr class="component-row">
      <td>
        <strong>${c.name}</strong>${c.quantity > 1 ? html` ×${c.quantity}` : ''}
        <div class="component-materials">
          ${c.materials.map(m => html`<span class="${m.isLocal ? 'local' : 'import'}">${m.symbol || m.name} ${m.fraction_pct}%</span>`)}
        </div>
      </td>
      <td>${c.massKg ? c.massKg.toFixed(0) : '—'} кг</td>
      <td class="${c.isLocal ? 'local' : 'import'}">${c.isLocal ? '✓' : '⚠ импорт'}</td>
    </tr>
  `);

  // Строки таблицы материалов
  const materialRows = materials.map(m => html`
    <tr>
      <td>
        ${m.material?.symbol ? html`<strong>${m.material.symbol}</strong> ` : ''}
        ${m.material?.name || m.material_id}
      </td>
      <td>${m.fraction_pct}%</td>
      <td>${m.massKg || '—'} кг</td>
      <td class="${m.isLocal ? 'local' : 'import'}">${m.isLocal ? '✓ местный' : '⚠ импорт'}</td>
    </tr>
  `);

  return html`
    <div class="db-widget">
      <h4>${unit.name} <span style="color: #6c757d; font-weight: normal;">(${unit.id})</span></h4>
      <div class="meta">
        ${unit.mass_kg ? html`<strong>${unit.mass_kg.toLocaleString()}</strong> кг` : ''}
        ${unit.power_kw ? html` | <strong>${unit.power_kw.toLocaleString()}</strong> кВт` : ''}
        ${planet ? html` | Производство: ${planet.name}` : ''}
      </div>

      ${components.length > 0 ? html`
        <div class="section-header">Компоненты</div>
        <table class="components-table">
          <thead><tr><th>Компонент</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${componentRows}</tbody>
        </table>
      ` : ''}

      ${materials.length > 0 ? html`
        <div class="section-header">Материалы</div>
        <table class="materials-table">
          <thead><tr><th>Материал</th><th>%</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${materialRows}</tbody>
        </table>
        <div class="summary">
          Итого: <span class="local-pct">${localPct.toFixed(0)}% местное</span> |
          <span class="import-pct">${importPct.toFixed(0)}% импорт</span>
          ${hasCriticalImports ? html`<br/><strong>⚠ Содержит импортные компоненты</strong>` : ''}
        </div>
      ` : ''}

      <div class="link">
        <a href="data/nomenclature.html?unit=${unitId}">Подробнее →</a>
      </div>
    </div>
  `;
}
```

# Добыча углерода (опциональный модуль)

> **Статус:** Опциональное расширение. Базовый завод работает **БЕЗ** углерода.

---

## Зачем нужен углерод?

| Применение | Расход | Приоритет |
|------------|--------|-----------|
| Углеродные аноды MRE | ~10 кг/день | Высокий (замена дорогого иридия) |
| Графитовые смазки | ~1 кг/день | Средний |
| Легированная сталь | 1-1.4% C | Низкий (Fe-6%Mn достаточно) |

**Вывод:** Основное применение — **замена иридиевых анодов** углеродными. Это снижает зависимость от импорта.

---

## Источник углерода

**LRM (Low Reflectance Material)** — тёмные зоны на поверхности Меркурия. Это древняя графитовая кора, сформировавшаяся 4.6 млрд лет назад при остывании магматического океана.

| Параметр | Значение |
| :--- | :--- |
| Содержание C в LRM | 1-3% (MESSENGER, Peplowski et al. 2016) |
| Происхождение | Графит всплыл на поверхность магматического океана |
| Форма | Кристаллический графит (не аморфный углерод) |
| Температура сублимации | 3640°C (не плавится при MRE) |

### Процесс извлечения

При MRE-электролизе LRM-обогащённого реголита графит **не плавится** (Tсублимации = 3640°C > Tрасплава = 1500°C). Частицы графита всплывают на поверхность расплава как пена и снимаются скиммером вместе со шлаком.

| Этап | Описание |
| :--- | :--- |
| Добыча | Роботы собирают реголит из LRM-зон (тёмные участки) |
| Плавка | MRE при 1500°C — графит не растворяется |
| Флотация | Графит (ρ=2.2 г/см³) всплывает на поверхность |
| Сбор | Скиммер снимает графитовую пену |
| Очистка | Термическая возгонка примесей |

**Выход:** При переработке 200 т LRM-реголита/день (~2-3% C): **4-6 т графита/день**.

> **Источник:** Peplowski, P.N. et al. (2016). "Evidence for geochemically distinct regions on Mercury." Nature Geoscience. [Johns Hopkins APL](https://hub.jhu.edu/2016/03/10/carbon-explains-mercury-darkness-apl-study/)

---

## Комплексы «Карбон»: мини-заводы по добыче графита

**Проблема:** LRM-зоны (с графитом) находятся на **экваториальных широтах**, а основные заводы — на **полюсах**.

| Кратер | Широта | Расстояние до полюса | Содержание C |
|--------|--------|---------------------|--------------|
| Rachmaninoff | 27°N | ~2800 км | до 4% |
| Tolstoj | 16°S | ~5800 км | 2-3% |

**На полюсах графита НЕТ** — там обычный реголит + водяной лёд.

Комплексы «Карбон» — это **полноценные мини-заводы**, а не просто «станции сбора». Они:

1. Добывают и перерабатывают LRM-реголит
2. Извлекают графит (основной продукт → на полюс)
3. Извлекают Al, Fe, Si (для собственных нужд)
4. Сами строят мини масс-драйвер для доставки графита

### Архитектура: два комплекса

На экваторе ночь длится **~88 земных суток**. Один комплекс простаивал бы половину времени.

**Решение:** Два комплекса на противоположных полушариях. Когда у одного ночь — работает другой.

```
        СЕВЕРНЫЙ ПОЛЮС (завод "Точка Ноль")
                    ●
                   /|\
    [МД-графит] ←─────── Карбон-Север (Rachmaninoff, 27°N)
                   │
    [МД-графит] ←─────── Карбон-Юг (Tolstoj, 16°S)
                   \|/
                    ●
        ЮЖНЫЙ ПОЛЮС
```

| Комплекс | Локация | Диаметр кратера | Расстояние до полюса |
|----------|---------|-----------------|---------------------|
| **Карбон-Север** | [Rachmaninoff](https://en.wikipedia.org/wiki/Rachmaninoff_(crater)), 27°N, 58°E | 305 км | ~2800 км |
| **Карбон-Юг** | [Tolstoj](https://en.wikipedia.org/wiki/Tolstoj_Basin), 16°S, 163°W | 390 км | ~5800 км |

### Технологический процесс на комплексе

```
LRM-реголит (200 т/день) → Дробление → MRE-плавка (1500°C)
                                            ↓
                          ┌─────────────────┼─────────────────┐
                          ↓                 ↓                 ↓
                     ГРАФИТ            ТЯЖЁЛЫЕ            ШЛАК
                   (всплывает)        (Fe, тонут)      (Al, Mg, Si)
                          ↓                 ↓                 ↓
                     Скиммер           МГД-насос        Дистилляция
                          ↓                 ↓                 ↓
                     Упаковка          Литьё            Раздельные
                     → МД              → рельсы         металлы
```

**Выход материалов (200 т LRM-реголита/день):**

LRM-реголит содержит те же элементы, что и обычный реголит, плюс 2-3% графита:

| Элемент | В LRM-реголите | Выход (200 т/день) | Назначение |
|---------|----------------|-------------------|------------|
| **Графит (C)** | 2-3% | **4-6 т/день** | → полюс (МД) |
| Алюминий (Al) | ~7% | ~14 т/день | Рельсы МД, обмотки |
| Железо (Fe) | ~2% | ~4 т/день | Каркас тоннеля МД |
| Кремний (Si) | ~25% | ~50 т/день | Шлак (не используется) |

### Сводка: комплекс Карбон vs основной завод

| Параметр | Основной завод | Комплекс Карбон |
|----------|----------------|-----------------|
| Реголит/день | 600 т | 200 т |
| Основной продукт | Зеркала | Графит |
| Побочные продукты | Все металлы → промышленность | Al, Fe для себя |
| Масс-драйвер | 3 км, 1300 т | 500 м - 1 км, ~330 т |
| Роботов | ~60 | ~10 |
| Энергия | 55 МВт | ~5 МВт |
| Bootstrap с Земли | 62 т | ~10 т |

---

## Мини масс-драйверы

### Назначение

**Доставка графита** с экваториальных LRM-зон на полярные заводы. Каждый комплекс «Карбон» строит собственный мини масс-драйвер из местных материалов.

### Сравнение с основным МД

| Параметр | Основной МД (полюс) | Мини МД (Карбон) |
|----------|---------------------|------------------|
| Назначение | Запуск зеркал на орбиту | Доставка графита на полюс |
| Расстояние | На орбиту (бесконечность) | 2800-5800 км |
| Целевая скорость | 5 км/с | 2-3 км/с |
| Длина | 2-3 км | 500 м - 1 км |
| Масса | ~1300 т | ~330 т |
| Ускорение | 43g | 20-25g |
| Груз/запуск | 116 кг (зеркало) | 100 кг (контейнер графита) |
| Энергия/запуск | 3.6 ГДж | 0.5-1 ГДж |

### Почему скорость ниже?

Для баллистического полёта внутри планеты не нужна орбитальная скорость. Достаточно достичь вершины параболы и упасть на приёмник.

```
Время полёта ≈ 2 × √(2h/g)

Для h = 300 км (апогей):
t ≈ 2 × √(600000 / 3.7) ≈ 800 сек ≈ 13 мин

С горизонтальной компонентой: 20-30 мин полёта
```

### Мини масс-драйвер

```{ojs}
unitWidget("EQU-011")
```

**Компоненты:** каркас (сталь ~200 т), рельсы + обмотки (Al ~130 т), электроника (~2 т импорт)

### Строительство мини МД

Комплекс Карбон сам производит материалы и строит мини МД.

**Темп накопления (200 т LRM-реголита/день):**

| Материал | Выход/день | Нужно для МД | Дней накопления |
|----------|------------|--------------|-----------------|
| Алюминий | ~14 т | ~130 т | ~10 дней |
| Железо | ~4 т | ~200 т | ~50 дней |

**Этапы строительства:**

| Этап | Длительность | Роботов |
|------|-------------|---------|
| Накопление материалов | ~30 дней | — |
| Рытьё траншеи (1 км) | ~30 дней | 3 Крота-М |
| Укладка каркаса | ~15 дней | 3 Кентавра-М |
| Монтаж рельсов и катушек | ~15 дней | 3 Кентавра-М |
| **ИТОГО** | **~3 месяца** | |

### Энергопотребление

| Параметр | Значение |
|----------|----------|
| Кинетическая энергия (100 кг, 2.5 км/с) | ~0.31 ГДж |
| С КПД 40% (затраты электричества) | ~0.8 ГДж |
| При 50 запусках/день | ~40 ГДж/день |
| Средняя мощность | **~0.5 МВт** |

**Расчёт:** E = mv²/2 = 100 кг × (2500 м/с)² / 2 = 312.5 МДж ≈ 0.31 ГДж. С учётом КПД 40%: 0.31/0.4 ≈ 0.8 ГДж на запуск.

---

## Доставка графита на полюс

### Параметры доставки

| Параметр | Карбон-Север | Карбон-Юг |
|----------|--------------|-----------|
| Расстояние | ~2800 км | ~5800 км |
| Скорость запуска | ~2 км/с | ~3 км/с |
| Длина МД | ~500 м | ~1 км |
| Время полёта | ~20 мин | ~30 мин |
| Груз/запуск | ~100 кг | ~100 кг |
| Запусков/день | ~50 | ~50 |
| Выход графита | 4-6 т/день | 4-6 т/день |

### Приёмник на полюсе

| Компонент | Описание |
|-----------|----------|
| Сетка-ловушка | Диаметр ~500 м, трос-сетка |
| Демпферы | Поглощение удара (контейнеры прилетают со скоростью ~100 м/с) |
| Крабы-М | 2 робота собирают контейнеры |
| Буфер | Склад контейнеров перед переработкой |

### Расписание работы

```
Меркурианские солнечные сутки (176 земных дней):

Комплексы расположены со сдвигом ~140° по долготе (Rachmaninoff 58°E, Tolstoj 163°W).
Их циклы день/ночь сдвинуты примерно на 68 земных дней.

Примерное расписание:
- День 1-88:   Карбон-Север работает (день), Карбон-Юг в сумерках/ночи
- День 68-156: Карбон-Юг работает (день), Карбон-Север в сумерках/ночи

Периоды перекрываются → минимум один комплекс активен всегда.
```

**Итого:** Посменная работа обеспечивает непрерывную поставку **~5 т графита/день** (от активного комплекса).

---

## Развёртывание комплексов Карбон

### Фаза 1: Bootstrap (первые 6 месяцев)

**Комплекс Карбон:**

```{ojs}
unitWidget("FAC-002")
```

**Bootstrap с Земли (~10 т):**

- Роботы: 3 Крота-М, 3 Кентавра-М, 2 Краба-М (~5 т)
- Мини MRE-печь (~2 т)
- Солнечные зеркала (~1 т)
- Электроника для МД (~2 т)

**Этапы развёртывания:**

| Месяц | Активность |
|-------|------------|
| 1-2 | Сборка MRE-печи, начало добычи LRM-реголита |
| 3-4 | Накопление материалов для мини МД |
| 5-6 | Строительство мини МД |
| 7+ | Эксплуатация — доставка графита на полюс |

### Фаза 2: Эксплуатация

После запуска мини МД:
- Графит отправляется на полюс (4-6 т/день с активного комплекса)
- Два комплекса посменно обеспечивают **~5 т/день непрерывно**

---

## Когда строить комплексы Карбон?

| Условие | Решение |
|---------|---------|
| Иридиевые аноды изнашиваются | Строим Карбон для углеродных анодов |
| Нужна легированная сталь | Добавляем углерод к Fe-6%Mn |
| Базовый завод работает | **Не нужно** — продолжаем без углерода |

**Вывод:** Комплексы Карбон — это **опциональное расширение**. Базовый завод полностью функционален без них.

---

## Источники

- [Klima et al. (2018)](https://agupubs.onlinelibrary.wiley.com/doi/10.1002/2018GL077544) — глобальное распределение LRM
- [Peplowski et al. (2016)](https://hub.jhu.edu/2016/03/10/carbon-explains-mercury-darkness-apl-study/) — углерод на Меркурии
