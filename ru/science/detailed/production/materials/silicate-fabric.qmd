---
title: "3.1.1 Линия стекловолокна"
sidebar: science
execute:
  echo: false
---

```{ojs}
//| output: false

// Загрузка данных из JSON
dataScript = FileAttachment("../../../data/db/data.json").json()

// Материалы доступные на Меркурии (две версии для совместимости)
mercuryProduction = new Set(
  dataScript.materialProduction
    .filter(mp => mp.planet_id === "mercury")
    .map(mp => mp.material_id)
)

mercuryMaterials = new Set(
  dataScript.planetMaterials
    .filter(pm => pm.planet_id === "mercury")
    .map(pm => pm.material_id)
)

// Словари для быстрого поиска
materialsById = new Map(dataScript.materials.map(m => [m.id, m]))
unitsById = new Map(dataScript.units.map(u => [u.id, u]))
planetsById = new Map(dataScript.planets.map(p => [p.id, p]))

// Функция для получения материалов компонента
function getComponentMaterials(componentId) {
  return dataScript.unitMaterials
    .filter(um => um.unit_id === componentId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      return {
        symbol: material?.symbol,
        name: material?.name || um.material_id,
        fraction_pct: um.fraction_pct,
        isLocal: mercuryProduction.has(um.material_id)
      };
    });
}

// Функция для отображения виджета единицы
function unitWidget(unitId) {
  const unit = unitsById.get(unitId);
  if (!unit) return html`<div class="db-widget">Единица ${unitId} не найдена</div>`;

  const planet = planetsById.get(unit.production_planet_id);

  // Материалы базового юнита
  const materials = dataScript.unitMaterials
    .filter(um => um.unit_id === unitId)
    .map(um => {
      const material = materialsById.get(um.material_id);
      const isLocal = mercuryProduction.has(um.material_id);
      const massKg = unit.mass_kg ? (unit.mass_kg * um.fraction_pct / 100).toFixed(0) : null;
      return { ...um, material, isLocal, massKg };
    });

  // Компоненты (подсборки)
  const components = dataScript.unitComponents
    .filter(uc => uc.assembly_id === unitId)
    .map(uc => {
      const component = unitsById.get(uc.component_id);
      const totalMassKg = component?.mass_kg ? (component.mass_kg * uc.quantity) : null;
      const isLocal = component?.production_planet_id === unit.production_planet_id;
      const componentMaterials = getComponentMaterials(uc.component_id);

      return {
        id: uc.component_id,
        name: component?.name || uc.component_id,
        quantity: uc.quantity,
        massKg: totalMassKg,
        isLocal,
        materials: componentMaterials
      };
    });

  // Итого считаем ТОЛЬКО по материалам (не компонентам!)
  const localPct = materials.filter(m => m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const importPct = materials.filter(m => !m.isLocal).reduce((sum, m) => sum + m.fraction_pct, 0);
  const hasCriticalImports = components.some(c => !c.isLocal);

  // Строки таблицы компонентов
  const componentRows = components.map(c => html`
    <tr class="component-row">
      <td>
        <strong>${c.name}</strong>${c.quantity > 1 ? html` ×${c.quantity}` : ''}
        <div class="component-materials">
          ${c.materials.map(m => html`<span class="${m.isLocal ? 'local' : 'import'}">${m.symbol || m.name} ${m.fraction_pct}%</span>`)}
        </div>
      </td>
      <td>${c.massKg ? c.massKg.toFixed(0) : '—'} кг</td>
      <td class="${c.isLocal ? 'local' : 'import'}">${c.isLocal ? '✓' : '⚠ импорт'}</td>
    </tr>
  `);

  // Строки таблицы материалов
  const materialRows = materials.map(m => html`
    <tr>
      <td>
        ${m.material?.symbol ? html`<strong>${m.material.symbol}</strong> ` : ''}
        ${m.material?.name || m.material_id}
      </td>
      <td>${m.fraction_pct}%</td>
      <td>${m.massKg || '—'} кг</td>
      <td class="${m.isLocal ? 'local' : 'import'}">${m.isLocal ? '✓ местный' : '⚠ импорт'}</td>
    </tr>
  `);

  return html`
    <div class="db-widget">
      <h4>${unit.name} <span style="color: #6c757d; font-weight: normal;">(${unit.id})</span></h4>
      <div class="meta">
        ${unit.mass_kg ? html`<strong>${unit.mass_kg.toLocaleString()}</strong> кг` : ''}
        ${unit.power_kw ? html` | <strong>${unit.power_kw.toLocaleString()}</strong> кВт` : ''}
        ${planet ? html` | Производство: ${planet.name}` : ''}
      </div>

      ${components.length > 0 ? html`
        <div class="section-header">Компоненты</div>
        <table class="components-table">
          <thead><tr><th>Компонент</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${componentRows}</tbody>
        </table>
      ` : ''}

      ${materials.length > 0 ? html`
        <div class="section-header">Материалы</div>
        <table class="materials-table">
          <thead><tr><th>Материал</th><th>%</th><th>Масса</th><th>Источник</th></tr></thead>
          <tbody>${materialRows}</tbody>
        </table>
        <div class="summary">
          Итого: <span class="local-pct">${localPct.toFixed(0)}% местное</span> |
          <span class="import-pct">${importPct.toFixed(0)}% импорт</span>
          ${hasCriticalImports ? html`<br/><strong>⚠ Содержит импортные компоненты</strong>` : ''}
        </div>
      ` : ''}

      <div class="link">
        <a href="data/nomenclature.html?unit=${unitId}">Подробнее →</a>
      </div>
    </div>
  `;
}
```

## Обзор

| Параметр | Значение |
|----------|----------|
| Вход | Силикаты (~5% от немагнитной фракции) |
| Выход | Стекловолокно |
| Производительность | ~30 т/день |
| Энергопотребление | Солнечная печь (тепловая) |

← [Назад к обзору](overview.qmd)

---

## Назначение линии

Часть силикатного потока (~5%) идёт на производство стекловолокна напрямую, минуя MRE-электролиз.

**Почему отдельная линия:**

- Для волокна нужны силикаты в исходном виде (оксиды SiO₂, CaO, Al₂O₃)
- В MRE оксиды разлагаются электролизом на металлы + O₂
- Если всё электролизовать — силикатов для волокна не останется

```{mermaid}
flowchart LR
    subgraph ВХОД["НЕМАГНИТНАЯ ФРАКЦИЯ"]
        NM[/"Силикаты<br/>564 т/день"/]
    end

    NM --> |"~5%"| GF["Линия стекловолокна<br/>(солнечная печь)"]
    NM --> |"~95%"| MRE["MRE-электролиз"]

    GF --> FIBER[/"Стекловолокно<br/>~30 т/день"/]
    MRE --> METAL[/"Металлы + O₂"/]

    style GF fill:#b8e0d2
    style MRE fill:#e8a8d4
```

---

## Состав силикатов (сырьё)

Силикаты реголита Меркурия **уже содержат** нужный состав для стекловолокна — близкий к промышленному E-glass:

| Оксид | Доля | Роль в стекле |
| :--- | :--- | :--- |
| SiO₂ | ~45% | Стеклообразователь |
| Al₂O₃ | ~15% | Прочность, химстойкость |
| CaO | ~10% | Флюс (снижает Tпл) |
| MgO | ~10% | Прочность |
| FeO | ~5% | Примесь (даёт зеленоватый цвет) |

> **Примечание:** На Земле в E-glass добавляют бор (B₂O₃) для снижения температуры плавки. На Меркурии бора нет — плавим при более высокой температуре (~1400°C), что не проблема для солнечной печи.

---

## Схема процесса

```{mermaid}
flowchart TD
    subgraph ПЛАВКА["ПЛАВКА"]
        SIL[/"Силикаты<br/>~30 т/день"/] --> SF["Малая солнечная печь<br/>1400°C"]
        SF --> MELT["Расплавленное стекло"]
    end

    subgraph ФИБЕРИЗАЦИЯ["ФИБЕРИЗАЦИЯ"]
        MELT --> FILT["Pt-Rh фильеры<br/>(импорт)"]
        FILT --> FIBER["Волокно 5-13 мкм"]
        FIBER --> DRUM["Намоточный барабан"]
    end

    subgraph ПРОДУКТ["ПРОДУКТ"]
        DRUM --> BOBBIN[/"Бобины<br/>стекловолокна"/]
    end

    style ПЛАВКА fill:#fff3cd
    style ФИБЕРИЗАЦИЯ fill:#d4edda
    style ПРОДУКТ fill:#cce5ff
```

| Этап | Описание | Температура |
| :--- | :--- | :--- |
| Плавка | Силикаты плавятся в солнечной печи | 1400°C |
| Фиберизация | Расплав продавливается через платиновые фильеры | 1200°C |
| Вытягивание | Волокно диаметром 5-13 мкм вытягивается барабаном | — |
| Намотка | Волокно собирается в бобины | — |

---

## Оборудование

| Компонент | Функция | Материалы |
| :--- | :--- | :--- |
| Малая солнечная печь | Плавка силикатов | Al зеркала, MgO тигель |
| Платиновые фильеры | Вытягивание волокна | Pt-Rh (**импорт**) |
| Намоточный барабан | Сбор бобин | Fe рама, Al барабан |

### Платиновые фильеры (Pt-Rh) — стратегический импорт

| Параметр | Значение |
| :--- | :--- |
| Масса комплекта | 200-400 кг Pt-Rh |
| Срок службы | 3-5 лет |
| Расход на замену | ~50-100 кг/год |
| Тип импорта | Разовый (при запуске) + редкие замены |

> **Почему платина:** Pt выдерживает 1770°C и не реагирует с расплавленным стеклом — это стандарт индустрии. Альтернатива — фильеры из вольфрама (W), но они окисляются. **Pt-Rh фильеры — единственный критический импорт линии.**

---

## Применение стекловолокна

| Продукт | Критичность | Назначение | Альтернатива |
| :--- | :--- | :--- | :--- |
| Изоляция кабелей | **Критическая** | Вся электропроводка завода | Керамические бусины (сложно) |
| Изоляция обмоток | **Критическая** | Все моторы, трансформаторы | Al₂O₃ керамика (хрупкая) |
| Ткань куполов | **Высокая** | Армирование Al-мембраны, новые заводы | Только металл (тяжелее) |
| Теплоизоляция | Средняя | Защита оборудования | MgO керамика, вакуум |
| Фильтры | Низкая | Очистка газов | В вакууме пыль падает сама |

> **Вывод:** Стекловолокно — **критический материал**. Без него невозможна электрика завода (кабели, моторы) и расширение (новые купола). Платиновые фильеры — стратегический импорт, который необходимо обеспечить.

---

## Источники

- **Owens Corning, Johns Manville** — крупнейшие производители стекловолокна. Технология отработана с 1930-х годов.
- **E-glass composition** — стандартный состав промышленного стекловолокна

---

## См. также

- [Переработка реголита](overview.qmd) — обзор процесса
- [Электролиз MRE](mre.qmd) — основная линия производства металлов
