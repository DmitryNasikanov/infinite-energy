# Исследование: Quarto vs Obsidian/Quartz

**Дата:** 2026-01-25
**Статус:** Отложено
**Контекст:** Анализ формата документации и возможности добавления графа связей

---

## Критерии оценки

1. **Публикация в интернете** — нужен публичный сайт
2. **Кросс-референсы** — много ссылок между документами
3. **Целостность информации** — ссылки не должны ломаться

---

## Вывод: Quarto — правильный выбор

| Вопрос | Ответ |
|--------|-------|
| Правильно ли выбрали Quarto? | **Да, для публикации — оптимально** |
| Был бы Obsidian удобнее для авторинга? | Да, особенно для кросс-референсов |
| Стоит ли мигрировать сейчас? | **Нет** — затраты > выгода |

---

## Сравнение Quarto vs Obsidian

### Quarto (текущий выбор)

**Плюсы:**
- Нативная генерация HTML, бесплатный хостинг (GitHub Pages)
- Академический стиль, темы, sidebar, ToC
- LaTeX нативно
- Mermaid встроен
- HTML + PDF + ePub из одного источника
- Plain text, git-friendly

**Минусы:**
- Кросс-референсы вручную: `[текст](путь/файл.qmd#якорь)`
- Обнаружение битых ссылок только при рендере
- При переименовании файла — вручную искать все ссылки
- Нет визуализации графа связей

### Obsidian

**Плюсы:**
- Wiki-стиль ссылок: `[[файл]]` или `[[файл#якорь]]`
- Автоматические обратные ссылки (backlinks)
- Визуализация структуры документов (граф)
- Автоматическое обновление ссылок при переименовании
- Real-time WYSIWYG превью

**Минусы:**
- Публикация требует дополнительных инструментов
  - Obsidian Publish: $8/мес, проприетарный
  - Quartz/Digital Garden: нужна настройка
  - [[wiki-links]] → стандартные MD: конвертация
- Менее академический стиль
- Математика и Mermaid через плагины
- Нет нативного PDF/ePub

---

## Граф связей: варианты

### Вариант 1: Quartz (полная замена Quarto)

[Quartz](https://quartz.jzhao.xyz/) — статический генератор для "цифровых садов":

| Функция | Поддержка |
|---------|-----------|
| Graph view | ✅ Встроен |
| Backlinks | ✅ Встроены |
| [[Wikilinks]] | ✅ + стандартные MD |
| Full-text search | ✅ Встроен |
| LaTeX | ✅ KaTeX |
| Mermaid | ✅ Через плагин |

**Требования для миграции:**
- Node v22+ (вместо Quarto)
- Переименовать `.qmd` → `.md`
- Заменить `.qmd` → `.md` в ссылках
- Конвертировать callouts: `::: {.callout-note}` → `> [!note]`

**Хорошая новость:** Quartz поддерживает стандартные MD ссылки — не обязательно переписывать на wikilinks.

**Что теряем:**
- PDF/ePub экспорт (можно pandoc)
- Ручной контроль sidebar

**Оценка миграции:** 2-4 часа

---

### Вариант 2: D3.js виджет для Quarto

Остаться на Quarto, написать скрипт:

1. Python-скрипт `scripts/build_graph.py`:
   - Читает все `.qmd` файлы
   - Извлекает ссылки regex
   - Генерирует `_output/graph.json`

2. Страница `ru/science/graph.qmd`:
   - Подключает D3.js
   - Рендерит интерактивный граф

**Пример JSON:**
```json
{
  "nodes": [
    {"id": "executive-summary", "group": "summaries"},
    {"id": "technology-readiness", "group": "reference"}
  ],
  "links": [
    {"source": "executive-summary", "target": "technology-readiness"}
  ]
}
```

**Оценка:** 2-3 часа

---

### Вариант 3: Скрипт проверки ссылок

Минимальное улучшение — только проверка битых ссылок без визуализации.

**Оценка:** 1 час

---

## Нужна ли графовая БД?

**Нет.** Для ~75 документов хватит JSON + D3.js.

| Сценарий | Инструмент |
|----------|------------|
| Визуализация ~75 документов | D3.js + JSON достаточно |
| Сложные запросы (путь между A и B) | Neo4j/Memgraph |
| Real-time обновление | Не нужно для статического сайта |

---

## Рекомендации на будущее

1. **Если нужен только граф** → D3.js виджет (меньше риска)
2. **Если хотите backlinks и граф** → Попробовать Quartz на копии
3. **Если проблемы с битыми ссылками** → Скрипт проверки

---

## Источники

- [Quartz 4 Documentation](https://quartz.jzhao.xyz/)
- [Quartz Wikilinks](https://quartz.jzhao.xyz/features/wikilinks)
- [Quarto GitHub Discussion: Graph View](https://github.com/quarto-dev/quarto-cli/discussions/5901)
- [D3.js](https://d3js.org/)
- [InfraNodus](https://infranodus.com/)
